<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Viewer</title>
    <script src="https://apis.google.com/js/api.js"></script>
</head>
<body>
    <div id="player"></div>
    <script>
        function onYouTubeIframeAPIReady() {
            gapi.load('client', function() {
                gapi.client.setApiKey('AIzaSyAamGx3VouMd5lLtHJ6k26zrzhLuK6lHYc');
                gapi.client.load('youtube', 'v3', function() {
                    searchYouTube('latest music videos');
                });
            });
        }

        function searchYouTube(query) {
            var request = gapi.client.youtube.search.list({
                part: 'snippet',
                q: query,
                type: 'video',
                maxResults: 1
            });

            request.execute(function(response) {
                var videoId = response.items[0].id.videoId;
                var player = document.getElementById('player');
                player.innerHTML = `<iframe width="100%" height="100%" src="https://www.youtube.com/embed/${videoId}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
                ThunkableWebviewerExtension.postMessage(`https://www.youtube.com/watch?v=${videoId}`);
            });
        }

        onYouTubeIframeAPIReady();
    </script>
</body>
</html>
